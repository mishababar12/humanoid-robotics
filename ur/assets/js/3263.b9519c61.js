"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[3263],{3263(e,t,n){n.d(t,{M:()=>be});const s=Object.create(null),o=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?s:globalThis),r=new Proxy(s,{get:(e,t)=>o()[t]??s[t],has:(e,t)=>t in o()||t in s,set:(e,t,n)=>(o(!0)[t]=n,!0),deleteProperty(e,t){if(!t)return!1;return delete o(!0)[t],!0},ownKeys(){const e=o(!0);return Object.keys(e)}});"undefined"!=typeof process&&process.env;function i(e,t){return"undefined"!=typeof process&&process.env?process.env[e]??t:"undefined"!=typeof Deno?Deno.env.get(e)??t:"undefined"!=typeof Bun?Bun.env[e]??t:t}Object.freeze({get BETTER_AUTH_SECRET(){return i("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return i("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return i("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return i("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return i("NODE_ENV","development")},get PACKAGE_VERSION(){return i("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return i("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}});const a=24,l={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:a,putty:4,st:4,"rxvt-unicode-24bit":a,terminator:a,"xterm-kitty":a},u=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:a,DRONE:8,GITEA_ACTIONS:a,GITHUB_ACTIONS:a,GITLAB_CI:8,TRAVIS:8})),c=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];const f="\x1b[0m",d="\x1b[1m",p="\x1b[2m",h={black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"},v=["debug","info","success","warn","error"];const y={info:h.blue,success:h.green,warn:h.yellow,error:h.red,debug:h.magenta};(e=>{const t=!0!==e?.disabled,n=e?.level??"error",s=void 0!==e?.disableColors?!e.disableColors:1!==function(){if(void 0!==i("FORCE_COLOR"))switch(i("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return a;default:return 1}if(void 0!==i("NODE_DISABLE_COLORS")&&""!==i("NODE_DISABLE_COLORS")||void 0!==i("NO_COLOR")&&""!==i("NO_COLOR")||"dumb"===i("TERM"))return 1;if(i("TMUX"))return a;if("TF_BUILD"in r&&"AGENT_NAME"in r)return 4;if("CI"in r){for(const{0:e,1:t}of u)if(e in r)return t;return"codeship"===i("CI_NAME")?8:1}if("TEAMCITY_VERSION"in r)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(i("TEAMCITY_VERSION"))?4:1;switch(i("TERM_PROGRAM")){case"iTerm.app":return i("TERM_PROGRAM_VERSION")&&null===/^[0-2]\./.exec(i("TERM_PROGRAM_VERSION"))?a:8;case"HyperTerm":case"MacTerm":return a;case"Apple_Terminal":return 8}if("truecolor"===i("COLORTERM")||"24bit"===i("COLORTERM"))return a;if(i("TERM")){if(null!==/truecolor/.exec(i("TERM")))return a;if(null!==/^xterm-256/.exec(i("TERM")))return 8;const e=i("TERM").toLowerCase();if(l[e])return l[e];if(c.some(t=>null!==t.exec(e)))return 4}return i("COLORTERM")?4:1}(),o=(o,r,i=[])=>{if(!t||!function(e,t){return v.indexOf(t)>=v.indexOf(e)}(n,o))return;const a=((e,t,n)=>{const s=(new Date).toISOString();return n?`${p}${s}${f} ${y[e]}${e.toUpperCase()}${f} ${d}[Better Auth]:${f} ${t}`:`${s} ${e.toUpperCase()} [Better Auth]: ${t}`})(o,r,s);e&&"function"==typeof e.log?e.log("success"===o?"info":o,r,...i):"error"===o?console.error(a,...i):"warn"===o?console.warn(a,...i):console.log(a,...i)};Object.fromEntries(v.map(e=>[e,(...[t,...n])=>o(e,t,n)]))})();var g=class extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}};function b(e,t="/api/auth"){if(function(e){try{const t=new URL(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new g(`Invalid base URL: ${e}. URL must include 'http://' or 'https://'`)}catch(t){if(t instanceof g)throw t;throw new g(`Invalid base URL: ${e}. Please provide a valid base URL.`,String(t))}}(e),function(e){try{return"/"!==(new URL(e).pathname.replace(/\/+$/,"")||"/")}catch{throw new g(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}(e))return e;const n=e.replace(/\/+$/,"");return t&&"/"!==t?`${n}${t=t.startsWith("/")?t:`/${t}`}`:n}function m(e,t,n,s,o){if(e)return b(e,t);if(!1!==s){const e=r.BETTER_AUTH_URL||r.NEXT_PUBLIC_BETTER_AUTH_URL||r.PUBLIC_BETTER_AUTH_URL||r.NUXT_PUBLIC_BETTER_AUTH_URL||r.NUXT_PUBLIC_AUTH_URL||("/"!==r.BASE_URL?r.BASE_URL:void 0);if(e)return b(e,t)}const i=n?.headers.get("x-forwarded-host"),a=n?.headers.get("x-forwarded-proto");if(i&&a&&o)return b(`${a}://${i}`,t);if(n){const e=function(e){try{const t=new URL(e);return"null"===t.origin?null:t.origin}catch{return null}}(n.url);if(!e)throw new g("Could not get origin from request. Please provide a valid base URL.");return b(e,t)}return"undefined"!=typeof window&&window.location?b(window.location.origin,t):void 0}const w={id:"redirect",name:"Redirect",hooks:{onSuccess(e){if(e.data?.url&&e.data?.redirect&&"undefined"!=typeof window&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}},T={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},E=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,R={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},O=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function S(e){const t=O.exec(e);if(!t)return null;const[,n,s,o,r,i,a,l,u,c,f]=t;let d=new Date(Date.UTC(parseInt(n,10),parseInt(s,10)-1,parseInt(o,10),parseInt(r,10),parseInt(i,10),parseInt(a,10),l?parseInt(l.padEnd(3,"0"),10):0));if(u){const e=(60*parseInt(c,10)+parseInt(f,10))*("+"===u?-1:1);d.setUTCMinutes(d.getUTCMinutes()+e)}return function(e){return e instanceof Date&&!isNaN(e.getTime())}(d)?d:null}function _(e,t={strict:!0}){return function(e,t={}){const{strict:n=!1,warnings:s=!1,reviver:o,parseDates:r=!0}=t;if("string"!=typeof e)return e;const i=e.trim();if(i.length>0&&'"'===i[0]&&i.endsWith('"')&&!i.slice(1,-1).includes('"'))return i.slice(1,-1);const a=i.toLowerCase();if(a.length<=9&&a in R)return R[a];if(!E.test(i)){if(n)throw new SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(T).some(([e,t])=>{const n=t.test(i);return n&&s&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${e} pattern`),n})&&n)throw new Error("[better-json] Potential prototype pollution attempt detected");try{const e=(e,t)=>{if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t)){if(r&&"string"==typeof t){const e=S(t);if(e)return e}return o?o(e,t):t}s&&console.warn(`[better-json] Dropping "${e}" key to prevent prototype pollution`)};return JSON.parse(i,e)}catch(l){if(n)throw l;return e}}(e,t)}let L=[],A=0;const I=e=>{let t=[],n={get:()=>(n.lc||n.listen(()=>{})(),n.value),lc:0,listen:e=>(n.lc=t.push(e),()=>{for(let t=A+4;t<L.length;)L[t]===e?L.splice(t,4):t+=4;let s=t.indexOf(e);~s&&(t.splice(s,1),--n.lc||n.off())}),notify(e,s){0;let o=!L.length;for(let r of t)L.push(r,n.value,e,s);if(o){for(A=0;A<L.length;A+=4)L[A](L[A+1],L[A+2],L[A+3]);L.length=0}},off(){},set(e){let t=n.value;t!==e&&(n.value=e,n.notify(t))},subscribe(e){let t=n.listen(e);return e(n.value),t},value:e};return n};let U=(e,t,n,s)=>(e.events=e.events||{},e.events[n+10]||(e.events[n+10]=s(t=>{e.events[n].reduceRight((e,t)=>(t(e),e),{shared:{},...t})})),e.events[n]=e.events[n]||[],e.events[n].push(t),()=>{let s=e.events[n],o=s.indexOf(t);s.splice(o,1),s.length||(delete e.events[n],e.events[n+10](),delete e.events[n+10])}),P=(e,t)=>U(e,n=>{let s=t(n);s&&e.events[6].push(s)},5,t=>{let n=e.listen;e.listen=(...s)=>(e.lc||e.active||(e.active=!0,t()),n(...s));let s=e.off;return e.events[6]=[],e.off=()=>{s(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let t of e.events[6])t();e.events[6]=[]}},1e3)},()=>{e.listen=n,e.off=s}});const $=Symbol.for("better-auth:broadcast-channel");var x=class{listeners=new Set;name;constructor(e="better-auth.message"){this.name=e}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}post(e){if("undefined"!=typeof window)try{localStorage.setItem(this.name,JSON.stringify({...e,timestamp:Math.floor(Date.now()/1e3)}))}catch{}}setup(){if("undefined"==typeof window||void 0===window.addEventListener)return()=>{};const e=e=>{if(e.key!==this.name)return;const t=JSON.parse(e.newValue??"{}");"session"===t?.event&&t?.data&&this.listeners.forEach(e=>e(t))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}};function C(e="better-auth.message"){return globalThis[$]||(globalThis[$]=new x(e)),globalThis[$]}const N=Symbol.for("better-auth:focus-manager");var j=class{listeners=new Set;subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setFocused(e){this.listeners.forEach(t=>t(e))}setup(){if("undefined"==typeof window||"undefined"==typeof document||void 0===window.addEventListener)return()=>{};const e=()=>{"visible"===document.visibilityState&&this.setFocused(!0)};return document.addEventListener("visibilitychange",e,!1),()=>{document.removeEventListener("visibilitychange",e,!1)}}};function k(){return globalThis[N]||(globalThis[N]=new j),globalThis[N]}const M=Symbol.for("better-auth:online-manager");var B=class{listeners=new Set;isOnline="undefined"==typeof navigator||navigator.onLine;subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setOnline(e){this.isOnline=e,this.listeners.forEach(t=>t(e))}setup(){if("undefined"==typeof window||void 0===window.addEventListener)return()=>{};const e=()=>this.setOnline(!0),t=()=>this.setOnline(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e,!1),window.removeEventListener("offline",t,!1)}}};function q(){return globalThis[M]||(globalThis[M]=new B),globalThis[M]}const D=()=>Math.floor(Date.now()/1e3);function F(e){const{sessionAtom:t,sessionSignal:n,$fetch:s,options:o={}}=e,r=o.sessionOptions?.refetchInterval??0,i=o.sessionOptions?.refetchOnWindowFocus??!0,a=o.sessionOptions?.refetchWhenOffline??!1,l={lastSync:0,lastSessionRequest:0,cachedSession:void 0},u=e=>{if(!a&&!q().isOnline)return;if("storage"===e?.event)return l.lastSync=D(),void n.set(!n.get());const o=t.get();if("poll"===e?.event)return l.lastSessionRequest=D(),void s("/get-session").then(e=>{t.set({...o,data:e.data,error:e.error||null}),l.lastSync=D(),n.set(!n.get())}).catch(()=>{});"visibilitychange"===e?.event&&D()-l.lastSessionRequest<5&&null!=o?.data||null!=o?.data&&"visibilitychange"!==e?.event||("visibilitychange"===e?.event&&(l.lastSessionRequest=D()),l.lastSync=D(),n.set(!n.get()))};return{init:()=>{r&&r>0&&(l.pollInterval=setInterval(()=>{t.get()?.data&&u({event:"poll"})},1e3*r)),l.unsubscribeBroadcast=C().subscribe(()=>{u({event:"storage"})}),i&&(l.unsubscribeFocus=k().subscribe(()=>{u({event:"visibilitychange"})})),l.unsubscribeOnline=q().subscribe(e=>{e&&u({event:"visibilitychange"})}),C().setup(),k().setup(),q().setup()},cleanup:()=>{l.pollInterval&&(clearInterval(l.pollInterval),l.pollInterval=void 0),l.unsubscribeBroadcast&&(l.unsubscribeBroadcast(),l.unsubscribeBroadcast=void 0),l.unsubscribeFocus&&(l.unsubscribeFocus(),l.unsubscribeFocus=void 0),l.unsubscribeOnline&&(l.unsubscribeOnline(),l.unsubscribeOnline=void 0),l.lastSync=0,l.lastSessionRequest=0,l.cachedSession=void 0},triggerRefetch:u,broadcastSessionUpdate:e=>{C().post({event:"session",data:{trigger:e},clientId:Math.random().toString(36).substring(7)})}}}function H(e,t){const n=I(!1),s=((e,t,n,s)=>{const o=I({data:null,error:null,isPending:!0,isRefetching:!1,refetch:e=>r(e)}),r=async e=>new Promise(r=>{const i="function"==typeof s?s({data:o.get().data,error:o.get().error,isPending:o.get().isPending}):s;n(t,{...i,query:{...i?.query,...e?.query},async onSuccess(e){o.set({data:e.data,error:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await(i?.onSuccess?.(e))},async onError(e){const{request:t}=e,n="number"==typeof t.retry?t.retry:t.retry?.attempts,s=t.retryAttempt||0;n&&s<n||(o.set({error:e.error,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await(i?.onError?.(e)))},async onRequest(e){const t=o.get();o.set({isPending:null===t.data,data:t.data,error:null,isRefetching:!0,refetch:o.value.refetch}),await(i?.onRequest?.(e))}}).catch(e=>{o.set({error:e,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch})}).finally(()=>{r(void 0)})});e=Array.isArray(e)?e:[e];let i=!1;for(const a of e)a.subscribe(async()=>{"undefined"!=typeof window&&(i?await r():P(o,()=>{const e=setTimeout(async()=>{i||(await r(),i=!0)},0);return()=>{o.off(),a.off(),clearTimeout(e)}}))});return o})(n,"/get-session",e,{method:"GET"});return P(s,()=>{const o=F({sessionAtom:s,sessionSignal:n,$fetch:e,options:t});return o.init(),()=>{o.cleanup()}}),{session:s,$sessionSignal:n}}var G=Object.defineProperty,W=Object.defineProperties,V=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,K=(e,t,n)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||(t={}))J.call(t,n)&&K(e,n,t[n]);if(Y)for(var n of Y(t))z.call(t,n)&&K(e,n,t[n]);return e},Z=(e,t)=>W(e,V(t)),Q=class extends Error{constructor(e,t,n){super(t||e.toString(),{cause:n}),this.status=e,this.statusText=t,this.error=n,Error.captureStackTrace(this,this.constructor)}},ee=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},te=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}};var ne=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function se(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function oe(e){try{return JSON.parse(e)}catch(t){return e}}function re(e){return"function"==typeof e}async function ie(e){const t=new Headers(null==e?void 0:e.headers),n=await(async e=>{const t={},n=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth)if("Bearer"===e.auth.type){const s=await n(e.auth.token);if(!s)return t;t.authorization=`Bearer ${s}`}else if("Basic"===e.auth.type){const[s,o]=await Promise.all([n(e.auth.username),n(e.auth.password)]);if(!s||!o)return t;t.authorization=`Basic ${btoa(`${s}:${o}`)}`}else if("Custom"===e.auth.type){const[s,o]=await Promise.all([n(e.auth.prefix),n(e.auth.value)]);if(!o)return t;t.authorization=`${null!=s?s:""} ${o}`}return t})(e);for(const[s,o]of Object.entries(n||{}))t.set(s,o);if(!t.has("content-type")){const n=function(e){if(se(e))return"application/json";return null}(null==e?void 0:e.body);n&&t.set("content-type",n)}return t}var ae=class e extends Error{constructor(t,n){super(n||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function le(e,t){const n=await e["~standard"].validate(t);if(n.issues)throw new ae(n.issues);return n.value}var ue=["get","post","put","patch","delete"],ce=e=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(t,n){var s,o,r,i;const a=(null==(o=null==(s=e.plugins)?void 0:s.find(e=>{var n;return!!(null==(n=e.schema)?void 0:n.config)&&(t.startsWith(e.schema.config.baseURL||"")||t.startsWith(e.schema.config.prefix||""))}))?void 0:o.schema)||e.schema;if(a){let e=t;(null==(r=a.config)?void 0:r.prefix)&&e.startsWith(a.config.prefix)&&(e=e.replace(a.config.prefix,""),a.config.baseURL&&(t=t.replace(a.config.prefix,a.config.baseURL))),(null==(i=a.config)?void 0:i.baseURL)&&e.startsWith(a.config.baseURL)&&(e=e.replace(a.config.baseURL,""));const s=a.schema[e];if(s){let e=Z(X({},n),{method:s.method,output:s.output});return(null==n?void 0:n.disableValidation)||(e=Z(X({},e),{body:s.input?await le(s.input,null==n?void 0:n.body):null==n?void 0:n.body,params:s.params?await le(s.params,null==n?void 0:n.params):null==n?void 0:n.params,query:s.query?await le(s.query,null==n?void 0:n.query):null==n?void 0:n.query})),{url:t,options:e}}}return{url:t,options:n}}});var fe=async(e,t)=>{var n,s,o,r,i,a,l,u;const{hooks:c,url:f,options:d}=await(async(e,t)=>{var n,s,o,r,i,a;let l=t||{};const u={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:l,hooks:u};for(const c of(null==t?void 0:t.plugins)||[]){if(c.init){const s=await(null==(n=c.init)?void 0:n.call(c,e.toString(),t));l=s.options||l,e=s.url}u.onRequest.push(null==(s=c.hooks)?void 0:s.onRequest),u.onResponse.push(null==(o=c.hooks)?void 0:o.onResponse),u.onSuccess.push(null==(r=c.hooks)?void 0:r.onSuccess),u.onError.push(null==(i=c.hooks)?void 0:i.onError),u.onRetry.push(null==(a=c.hooks)?void 0:a.onRetry)}return{url:e,options:l,hooks:u}})(e,t),p=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&re(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&re(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}(d),h=new AbortController,v=null!=(n=d.signal)?n:h.signal,y=function(e,t){const{baseURL:n,params:s,query:o}=t||{query:{},params:{},baseURL:""};let r=e.startsWith("http")?e.split("/").slice(0,3).join("/"):n||"";if(e.startsWith("@")){const t=e.toString().split("@")[1].split("/")[0];ue.includes(t)&&(e=e.replace(`@${t}/`,"/"))}r.endsWith("/")||(r+="/");let[i,a]=e.replace(r,"").split("?");const l=new URLSearchParams(a);for(const[c,f]of Object.entries(o||{})){if(null==f)continue;let e;if("string"==typeof f)e=f;else{if(Array.isArray(f)){for(const e of f)l.append(c,e);continue}e=JSON.stringify(f)}l.set(c,e)}if(s)if(Array.isArray(s)){const e=i.split("/").filter(e=>e.startsWith(":"));for(const[t,n]of e.entries()){const e=s[t];i=i.replace(n,e)}}else for(const[c,f]of Object.entries(s))i=i.replace(`:${c}`,String(f));i=i.split("/").map(encodeURIComponent).join("/"),i.startsWith("/")&&(i=i.slice(1));let u=l.toString();return u=u.length>0?`?${u}`.replace(/\+/g,"%20"):"",r.startsWith("http")?new URL(`${i}${u}`,r):`${r}${i}${u}`}(f,d),g=function(e){if(!(null==e?void 0:e.body))return null;const t=new Headers(null==e?void 0:e.headers);if(se(e.body)&&!t.has("content-type")){for(const[t,n]of Object.entries(null==e?void 0:e.body))n instanceof Date&&(e.body[t]=n.toISOString());return JSON.stringify(e.body)}return t.has("content-type")&&"application/x-www-form-urlencoded"===t.get("content-type")&&se(e.body)?new URLSearchParams(e.body).toString():e.body}(d),b=await ie(d),m=function(e,t){var n;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){const s=null==(n=e.split("@")[1])?void 0:n.split("/")[0];return ue.includes(s)?s.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(f,d);let w=Z(X({},d),{url:y,headers:b,body:g,method:m,signal:v});for(const I of c.onRequest)if(I){const e=await I(w);"object"==typeof e&&null!==e&&(w=e)}("pipeTo"in w&&"function"==typeof w.pipeTo||"function"==typeof(null==(s=null==t?void 0:t.body)?void 0:s.pipe))&&("duplex"in w||(w.duplex="half"));const{clearTimeout:T}=function(e,t){let n;return!(null==e?void 0:e.signal)&&(null==e?void 0:e.timeout)&&(n=setTimeout(()=>null==t?void 0:t.abort(),null==e?void 0:e.timeout)),{abortTimeout:n,clearTimeout:()=>{n&&clearTimeout(n)}}}(d,h);let E=await p(w.url,w);T();const R={response:E,request:w};for(const I of c.onResponse)if(I){const e=await I(Z(X({},R),{response:(null==(o=null==t?void 0:t.hookOptions)?void 0:o.cloneResponse)?E.clone():E}));e instanceof Response?E=e:"object"==typeof e&&null!==e&&(E=e.response)}if(E.ok){if(!("HEAD"!==w.method))return{data:"",error:null};const e=function(e){const t=e.headers.get("content-type"),n=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";const s=t.split(";").shift()||"";return ne.test(s)?"json":n.has(s)||s.startsWith("text/")?"text":"blob"}(E),n={data:null,response:E,request:w};if("json"===e||"text"===e){const e=await E.text(),t=null!=(r=w.jsonParser)?r:oe;n.data=await t(e)}else n.data=await E[e]();(null==w?void 0:w.output)&&w.output&&!w.disableValidation&&(n.data=await le(w.output,n.data));for(const s of c.onSuccess)s&&await s(Z(X({},n),{response:(null==(i=null==t?void 0:t.hookOptions)?void 0:i.cloneResponse)?E.clone():E}));return(null==t?void 0:t.throw)?n.data:{data:n.data,error:null}}const O=null!=(a=null==t?void 0:t.jsonParser)?a:oe,S=await E.text(),_=function(e){try{return JSON.parse(e),!0}catch(t){return!1}}(S),L=_?await O(S):null,A={response:E,responseText:S,request:w,error:Z(X({},L),{status:E.status,statusText:E.statusText})};for(const I of c.onError)I&&await I(Z(X({},A),{response:(null==(l=null==t?void 0:t.hookOptions)?void 0:l.cloneResponse)?E.clone():E}));if(null==t?void 0:t.retry){const n=function(e){if("number"==typeof e)return new ee({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new ee(e);case"exponential":return new te(e);default:throw new Error("Invalid retry strategy")}}(t.retry),s=null!=(u=t.retryAttempt)?u:0;if(await n.shouldAttemptRetry(s,E)){for(const e of c.onRetry)e&&await e(R);const o=n.getDelay(s);return await new Promise(e=>setTimeout(e,o)),await fe(e,Z(X({},t),{retryAttempt:s+1}))}}if(null==t?void 0:t.throw)throw new Q(E.status,E.statusText,_?L:S);return{data:null,error:Z(X({},L),{status:E.status,statusText:E.statusText})}};const de=(e,t)=>{const n="credentials"in Request.prototype,s=m(e?.baseURL,e?.basePath,void 0,t)??"/api/auth",o=e?.plugins?.flatMap(e=>e.fetchPlugins).filter(e=>void 0!==e)||[],r={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:e?.fetchOptions?.onSuccess,onError:e?.fetchOptions?.onError,onRequest:e?.fetchOptions?.onRequest,onResponse:e?.fetchOptions?.onResponse}},{onSuccess:i,onError:a,onRequest:l,onResponse:u,...c}=e?.fetchOptions||{},f=(d={baseURL:s,...n?{credentials:"include"}:{},method:"GET",jsonParser:e=>e?_(e,{strict:!1}):null,customFetchImpl:fetch,...c,plugins:[r,...c.plugins||[],...e?.disableDefaultFetchPlugins?[]:[w],...o]},async function(e,t){const n=Z(X(X({},d),t),{plugins:[...(null==d?void 0:d.plugins)||[],ce(d||{}),...(null==t?void 0:t.plugins)||[]]});if(null==d?void 0:d.catchAllError)try{return await fe(e,n)}catch(s){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:s}}}return await fe(e,n)});var d;const{$sessionSignal:p,session:h}=H(f,e),v=e?.plugins||[];let y={},g={$sessionSignal:p,session:h},b={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"};const T=[{signal:"$sessionSignal",matcher:e=>"/sign-out"===e||"/update-user"===e||"/sign-up/email"===e||"/sign-in/email"===e||"/delete-user"===e||"/verify-email"===e||"/revoke-sessions"===e||"/revoke-session"===e||"/change-email"===e}];for(const m of v)m.getAtoms&&Object.assign(g,m.getAtoms?.(f)),m.pathMethods&&Object.assign(b,m.pathMethods),m.atomListeners&&T.push(...m.atomListeners);const E={notify:e=>{g[e].set(!g[e].get())},listen:(e,t)=>{g[e].subscribe(t)},atoms:g};for(const m of v)m.getActions&&Object.assign(y,m.getActions?.(f,E,e));return{get baseURL(){return s},pluginsActions:y,pluginsAtoms:g,pluginPathMethods:b,atomListeners:T,$fetch:f,$store:E}};function pe(e,t,n,s,o){return function r(i=[]){return new Proxy(function(){},{get(t,n){if("string"!=typeof n)return;if("then"===n||"catch"===n||"finally"===n)return;const s=[...i,n];let o=e;for(const e of s){if(!o||"object"!=typeof o||!(e in o)){o=void 0;break}o=o[e]}return"function"==typeof o?o:"object"==typeof(a=o)&&null!==a&&"get"in a&&"function"==typeof a.get&&"lc"in a&&"number"==typeof a.lc?o:r(s);var a},apply:async(e,r,a)=>{const l="/"+i.map(e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)).join("/"),u=a[0]||{},c=a[1]||{},{query:f,fetchOptions:d,...p}=u,h={...c,...d},v=function(e,t,n){const s=t[e],{fetchOptions:o,query:r,...i}=n||{};return s||(o?.method?o.method:i&&Object.keys(i).length>0?"POST":"GET")}(l,n,u);return await t(l,{...h,body:"GET"===v?void 0:{...p,...h?.body||{}},query:f||h?.query,method:v,async onSuccess(e){if(await(h?.onSuccess?.(e)),!o||h.disableSignal)return;const t=o.filter(e=>e.matcher(l));if(t.length)for(const n of t){const e=s[n.signal];if(!e)return;const t=e.get();setTimeout(()=>{e.set(!t)},10)}}})}})}()}function he(e,t,n){let s=new Set(t).add(void 0);return e.listen((e,t,o)=>{s.has(o)&&n(e,t,o)})}var ve=n(6540);function ye(e,t={}){let n=(0,ve.useRef)(e.get());const{keys:s,deps:o=[e,s]}=t;let r=(0,ve.useCallback)(t=>{const o=e=>{n.current!==e&&(n.current=e,t())};return o(e.value),s?.length?he(e,s,o):e.listen(o)},o),i=()=>n.current;return(0,ve.useSyncExternalStore)(r,i,i)}function ge(e){return`use${function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e)}`}function be(e){const{pluginPathMethods:t,pluginsActions:n,pluginsAtoms:s,$fetch:o,$store:r,atomListeners:i}=de(e);let a={};for(const[l,u]of Object.entries(s))a[ge(l)]=()=>ye(u);return pe({...n,...a,$fetch:o,$store:r},o,t,s,i)}}}]);