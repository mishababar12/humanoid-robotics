<!DOCTYPE html>
<html>
<head>
    <title>Error Detector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .error-box {
            background: #ffebee;
            border: 2px solid #f44336;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .error-title {
            color: #c62828;
            font-weight: bold;
            font-size: 18px;
        }
        .error-message {
            color: #d32f2f;
            margin: 10px 0;
            font-family: monospace;
        }
        .stack-trace {
            background: #fff;
            padding: 10px;
            border-left: 3px solid #f44336;
            overflow-x: auto;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
        }
        .success {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            color: #2e7d32;
        }
    </style>
</head>
<body>
    <h1>üîç Error Detection Test</h1>
    <p>Yeh page automatically errors detect karega aur yahan display karega.</p>

    <div id="error-container">
        <div class="success">‚úÖ Abhi tak koi error nahi mila. Page load ho raha hai...</div>
    </div>

    <script>
        const errorContainer = document.getElementById('error-container');
        const errors = [];

        // Capture all errors
        window.onerror = function(message, source, lineno, colno, error) {
            console.error('Error caught:', message, error);

            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-box';
            errorDiv.innerHTML = `
                <div class="error-title">‚ùå Error Detected!</div>
                <div class="error-message">
                    <strong>Message:</strong> ${message}
                </div>
                <div class="error-message">
                    <strong>File:</strong> ${source}:${lineno}:${colno}
                </div>
                ${error && error.stack ? `
                <div>
                    <strong>Stack Trace:</strong>
                    <div class="stack-trace">${error.stack}</div>
                </div>
                ` : ''}
            `;

            errorContainer.innerHTML = '';
            errorContainer.appendChild(errorDiv);

            errors.push({message, source, lineno, colno, stack: error?.stack});
            return true;
        };

        // Capture unhandled promise rejections
        window.addEventListener('unhandledrejection', function(event) {
            console.error('Unhandled promise rejection:', event.reason);

            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-box';
            errorDiv.innerHTML = `
                <div class="error-title">‚ùå Promise Rejection Detected!</div>
                <div class="error-message">
                    <strong>Reason:</strong> ${event.reason}
                </div>
                ${event.reason && event.reason.stack ? `
                <div>
                    <strong>Stack Trace:</strong>
                    <div class="stack-trace">${event.reason.stack}</div>
                </div>
                ` : ''}
            `;

            errorContainer.innerHTML = '';
            errorContainer.appendChild(errorDiv);

            errors.push({type: 'promise', reason: String(event.reason)});
        });

        // After 5 seconds, show success if no errors
        setTimeout(() => {
            if (errors.length === 0) {
                errorContainer.innerHTML = '<div class="success">‚úÖ 5 seconds ke baad bhi koi error nahi! Sab kuch theek chal raha hai.</div>';
            }
        }, 5000);

        // Test for the specific error
        setTimeout(() => {
            try {
                // Try to trigger object to primitive conversion
                const testObj = {toString: null};
                const result = "test" + testObj;
            } catch(e) {
                console.log('Test object conversion error:', e);
            }
        }, 1000);
    </script>
</body>
</html>
